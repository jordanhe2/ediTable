var context=context||function(){function t(t){e=$.extend({},e,t),$(document).on("click","html",function(){$(".dropdown-context").fadeOut(e.fadeSpeed,function(){$(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left")})}),e.preventDoubleContext&&$(document).on("contextmenu",".dropdown-context",function(e){e.preventDefault()}),$(document).on("mouseenter",".dropdown-submenu",function(){var e=$(this).find(".dropdown-context-sub:first"),t=e.width(),n=e.offset().left,o=t+n>window.innerWidth;o&&e.addClass("drop-left")})}function n(t){e=$.extend({},e,t)}function o(t,n,d){var f=d?" dropdown-context-sub":"",a=e.compress?" compressed-context":"",i=$('<ul class="dropdown-menu dropdown-context'+f+a+'" id="dropdown-'+n+'"></ul>'),r=0,p="";for(r;r<t.length;r++){if("undefined"!=typeof t[r].divider)i.append('<li class="divider"></li>');else if("undefined"!=typeof t[r].header)i.append('<li class="nav-header">'+t[r].header+"</li>");else{if("undefined"==typeof t[r].href&&(t[r].href="#"),"undefined"!=typeof t[r].target&&(p=' target="'+t[r].target+'"'),$sub="undefined"!=typeof t[r].subMenu?'<li class="dropdown-submenu"><a tabindex="-1" href="'+t[r].href+'">'+t[r].text+"</a></li>":$('<li><a tabindex="-1" href="'+t[r].href+'"'+p+">"+t[r].text+"</a></li>"),"undefined"!=typeof t[r].action){var s=new Date,u="event-"+s.getTime()*Math.floor(1e5*Math.random()),c=t[r].action;$sub.find("a").attr("id",u),$("#"+u).addClass("context-event"),$(document).on("click","#"+u,c)}if(i.append($sub),"undefined"!=typeof t[r].subMenu){var l=o(t[r].subMenu,n,!0);i.find("li:last").append(l)}}"function"==typeof e.filter&&e.filter(i.find("li:last"))}return i}function d(t,n){var d=new Date,f=d.getTime(),a=o(n,f);$("body").append(a),$(t).on("contextmenu",function(t){if(t.preventDefault(),t.stopPropagation(),$(".dropdown-context:not(.dropdown-context-sub)").hide(),$dd=$("#dropdown-"+f),"boolean"==typeof e.above&&e.above)$dd.addClass("dropdown-context-up").css({top:t.pageY-20-$("#dropdown-"+f).height(),left:t.pageX-13}).fadeIn(e.fadeSpeed);else if("string"==typeof e.above&&"auto"==e.above){$dd.removeClass("dropdown-context-up");var n=$dd.height()+12;t.pageY+n>$("html").height()?$dd.addClass("dropdown-context-up").css({top:t.pageY-20-n,left:t.pageX-13}).fadeIn(e.fadeSpeed):$dd.css({top:t.pageY+10,left:t.pageX-13}).fadeIn(e.fadeSpeed)}})}function f(e){$(document).off("contextmenu",e).off("click",".context-event")}var e={fadeSpeed:100,filter:function(){},above:"auto",preventDoubleContext:!0,compress:!1};return{init:t,settings:n,attach:d,destroy:f}}();
